# دیمر هوشمند تطبیقی AC (Adaptive Smart AC Dimmer)



این پروژه، طراحی و شبیه‌سازی یک دیمر دیجیتال ایزوله و هوشمند برای کنترل لامپ‌های AC را به صورت گام به گام نمایش می‌دهد. پروژه از یک دیمر دستی ساده شروع شده و در هر فاز با افزودن سنسورها و منطق نرم‌افزاری پیشرفته‌تر، به یک سیستم روشنایی کاملاً خودکار و تطبیقی تبدیل می‌شود.

تمام مدارات در نرم‌افزار **Proteus** شبیه‌سازی شده‌اند.

---

## ویژگی‌های کلیدی

* ✅ **کنترل دقیق توان AC:** استفاده از تکنیک کنترل زاویه فاز (Phase Angle Control) برای تنظیم دقیق روشنایی.
* 🛡️ **ایمنی کامل:** ایزولاسیون گالوانیک بین مدار کنترل ولتاژ پایین و شبکه برق فشار قوی.
* 🕹️ **کنترل چند حالته:** دارای چهار حالت عملکرد با اولویت‌بندی هوشمند:
    1.  **دستی (Manual):** کنترل کامل و آنی با پتانسیومتر.
    2.  **تشخیص حرکت (Motion):** روشن شدن هوشمند لامپ با تشخیص حضور فرد.
    3.  **صحنه‌های نوری (Scenes):** قابلیت ذخیره و فراخوانی ۳ حالت نوری دلخواه.
    4.  **خودکار (Auto):** تنظیم خودکار روشنایی بر اساس نور محیط.
* 🧠 **منطق هوشمند:**
    * روشنایی تطبیقی در حالت تشخیص حرکت (بر اساس نور محیط).
    * بازگشت خودکار از حالت دستی و صحنه به حالت خودکار پس از یک دوره عدم فعالیت.
* 💾 **حافظه پایدار:** ذخیره تنظیمات صحنه‌ها در حافظه **EEPROM** تا با قطع برق از بین نروند.
* 💡 **رابط کاربری غنی:** بازخورد بصری با LED برای عملیات ذخیره و فراخوانی صحنه‌ها.

---

## روند تکامل پروژه (فازها)

این پروژه در چهار فاز اصلی توسعه یافته است. هر فاز بر پایه فاز قبلی ساخته شده و قابلیت‌های جدیدی به سیستم اضافه می‌کند. برای مشاهده جزئیات کامل، شبیه‌سازی و کدهای مربوط به هر مرحله، به README اختصاصی آن مراجعه کنید.

* ### فاز ۰: بلوک‌های پایه‌ای
    * طراحی و تحلیل دو مدار بنیادی پروژه:
        1.  **[مدار تشخیص عبور از صفر (Zero-Crossing Detector)](./simulation/zero_crossing_detector/Description.md)**
        2.  **[مدار سوئیچینگ ترایاک (TRIAC Switching Circuit)](./simulation/triac_switching/Description.md)**

* ### [فاز ۱: دیمر دستی](./simulation/Dimmer_phase01/Description.md)
    * ترکیب بلوک‌های پایه با یک میکروکنترلر (آردوینو).
    * پیاده‌سازی اولین نسخه کاربردی دیمر با کنترل دستی از طریق پتانسیومتر.

* ### [فاز ۲: کنترل خودکار با سنسور نور](./simulation/Dimmer_phase02/Description.md)
    * افزودن سنسور نور (LDR) برای سنجش روشنایی محیط.
    * پیاده‌سازی حالت خودکار و منطق هوشمند جابجایی بین حالت دستی و خودکار با Timeout.

* ### [فاز ۳: صحنه‌های نوری با حافظه](./simulation/Dimmer_phase03/Description.md)
    * افزودن کلیدهای فشاری برای تعریف و فراخوانی صحنه‌های نوری.
    * استفاده از حافظه EEPROM برای ذخیره‌سازی دائمی صحنه‌ها.
    * پیاده‌سازی رابط کاربری با فشار کوتاه/بلند و بازخورد بصری.

* ### [فاز ۴: هوشمندسازی با سنسور حرکت](./simulation/Dimmer_phase04/Description.md)
    * افزودن سنسور تشخیص حرکت (PIR).
    * تکمیل منطق کنترل با افزودن حالت تشخیص حرکت و اولویت‌بندی نهایی عملکردها.

---

## پشته فناوری (Technology Stack)

* **نرم‌افزار شبیه‌سازی:** Proteus 8 Professional
* **میکروکنترلر:** Arduino UNO (ATmega328P)
* **زبان برنامه‌نویسی:** C/C++ (Arduino Framework)
* **قطعات کلیدی:**
    * `PC817` (Optocoupler for Zero-Crossing)
    * `MOC3021` (Non-Zero-Crossing TRIAC Driver Optocoupler)
    * `L6004L3` (Sensitive Gate TRIAC)
    * `LDR` (Photoresistor)
    * `PIR Sensor` (Passive Infrared Sensor)

---

## نصب و راه‌اندازی شبیه‌سازی

برای اجرای صحیح شبیه‌سازی‌ها، به خصوص **فاز چهارم**، باید کتابخانه سنسور PIR را به نرم‌افزار پروتئوس خود اضافه کنید.

### نصب کتابخانه سنسور PIR

1.  **پیدا کردن پوشه DATA:** محل نصب پروتئوس خود را پیدا کنید. این پوشه معمولاً در مسیر `C:\Program Files (x86)\Labcenter Electronics\Proteus 8 Professional\DATA` قرار دارد.
2.  **کپی فایل‌های LIB:** محتویات پوشه `simulation/Dimmer_phase04/PIR-Sensor-dependencies/LIB/` را در پوشه `LIBRARY` (داخل پوشه `DATA`) کپی کنید.
3.  **کپی فایل‌های MODEL:** محتویات پوشه `simulation/Dimmer_phase04/PIR-Sensor-dependencies/MODEL/` را در پوشه `MODELS` (داخل پوشه `DATA`) کپی کنید.
4.  **راه‌اندازی مجدد:** نرم‌افزار پروتئوس را کاملاً بسته و دوباره باز کنید.

### اجرای شبیه‌سازی

1.  به پوشه فاز مورد نظر خود بروید (مثلاً `simulation/Dimmer_phase04/`).
2.  فایل پروژه پروتئوس با پسوند `.pdsprj` را باز کنید.
3.  از نوار ابزار پایین، دکمه "Play" را برای شروع شبیه‌سازی فشار دهید.

---

## ساختار پروژه

<ul>
<li><code>EmbeddedSys-HomeLight/</code>
<ul>
<li><code>simulation/</code>
<ul>
<li><code>Dimmer_phase01/</code>: فاز ۱ - دیمر دستی</li>
<li><code>Dimmer_phase02/</code>: فاز ۲ - کنترل خودکار (LDR)</li>
<li><code>Dimmer_phase03/</code>: فاز ۳ - صحنه‌های نوری (EEPROM)</li>
<li><code>Dimmer_phase04/</code>: فاز ۴ - سنسور حرکت (PIR)</li>
<li><code>triac_switching/</code>: مدار پایه سوئیچینگ</li>
<li><code>zero_crossing_detector/</code>: مدار پایه تشخیص عبور از صفر</li>
</ul>
</li>
<li><code>README.md</code>: فایل توضیحات اصلی پروژه</li>
</ul>
</li>
</ul>
